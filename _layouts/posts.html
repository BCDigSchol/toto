---
layout: page
---

{{ content }}

<div class="posts-container w-full flex flex-col justify-start items-center box-border">
  {% assign posts = site.data.posts | sort: 'id' | reverse %}
  {% for post in posts %}
    <article class="post-item w-full max-w-3xl box-border mb-8 p-4 border rounded-lg shadow-sm" style="width:100%; max-width:880px;">
      <!-- post header (avatar, title, author) -->
      <header class="flex items-center justify-between mb-4">
        <div class="flex items-center">
          <div class="avatar rounded-full bg-gray-200 mr-3" style="width:48px;height:48px;overflow:hidden;display:inline-block;">
            <!-- use a real avatar if available -->
                      <div class="avatar rounded-full bg-gray-200 mr-3" style="width:48px;height:48px;overflow:hidden;display:inline-block;">
             {%- if post.author_avatar and post.author_avatar != "" -%}
               <!-- real avatar file stored in /assets/img/ -->
               <img src="{{ site.baseurl }}/assets/img/{{ post.author_avatar }}" alt="{{ post.author_name }}" style="width:100%;height:100%;object-fit:cover;display:block;">
             {%- else -%}
               {%- assign name_parts = post.author_name | default: "" | split: " " -%}
               {%- assign first_initial = name_parts | first | default: "" | slice: 0, 1 -%}
               {%- if post.author_last_initial and post.author_last_initial != "" -%}
                 {%- assign last_initial = post.author_last_initial -%}
               {%- else -%}
                 {%- assign last_initial = name_parts | last | default: "" | slice: 0, 1 -%}
               {%- endif -%}
               {%- assign initials = first_initial | append: last_initial | upcase -%}
               <!-- fallback: initials avatar -->
               <div style="width:100%;height:100%;display:inline-flex;align-items:center;justify-content:center;background:#4f46e5;color:#fff;font-weight:600;">
                {{ initials }}
               </div>
             {%- endif -%}
          </div>
          </div>
          <div class="author leading-tight">
            <div class="text-sm font-semibold">{{ post.author_name }} {{ post.author_last_initial}}</div>
            <div class="text-xs text-gray-600">{{ post.author_department }} • {{ post.date | default: post.published_at }}</div>
          </div>
        </div>
        <!-- actions removed (Like removed). Share moved beside the title below -->
      </header>

      <!-- image (thumbnail limit) -->
      {% if post.object_location %}
      <div class="post-image mb-4 rounded overflow-hidden border" style="max-height:420px;">
        <img
          src="{{ site.baseurl }}/objects/{{ post.object_location }}"
          alt="{{ post.caption }}"
          class="max-w-full h-auto block"
          style="width:100%;height:100%;object-fit:cover;cursor:pointer;display:block;max-height:420px;"
          data-full-src="{{ site.baseurl }}/objects/{{ post.object_location }}"
          class="expandable-image"
        />
      </div>
      {% endif %}

            <!-- title row with share icon on the right -->
            <div class="post-title-row w-full flex items-center justify-between mb-2">
              <h2 class="post-title text-2xl font-bold flex-1">{{ post.title }}</h2>
              <a href="#" class="post-share text-gray-600 hover:text-gray-800" title="Share" aria-label="Share">
                <i class="fas fa-share" aria-hidden="true"></i>
              </a>
            </div>
      {% if post.excerpt or post.description %}
      <p class="post-excerpt text-base text-gray-800 mb-4">{{ post.excerpt | default: post.description }}</p>
      {% endif %}

      <!-- metadata / tags -->
      <footer class="post-meta text-sm text-gray-600">
        <p><strong>Subjects:</strong> {{ post.subjects }}</p>
      </footer>
    </article>
  {% endfor %}
</div>

<!-- Image modal (click-to-expand) -->
<div id="image-modal" style="display:none;position:fixed;inset:0;z-index:9999;background:rgba(0,0,0,0.75);align-items:center;justify-content:center;padding:1rem;">
  <button id="image-modal-close" aria-label="Close" style="position:absolute;top:1rem;right:1rem;background:transparent;border:none;color:#fff;font-size:1.5rem;cursor:pointer;">×</button>
  <div style="max-width:95%;max-height:95%;display:flex;align-items:center;justify-content:center;">
    <img id="image-modal-img" src="" alt="" style="max-width:100%;max-height:100%;object-fit:contain;border-radius:6px;box-shadow:0 8px 30px rgba(0,0,0,0.5);" />
  </div>
</div>

<script>
  (function(){
    // delegate click to any image inside .post-image
    var container = document.querySelector('.posts-container');
    var modal = document.getElementById('image-modal');
    var modalImg = document.getElementById('image-modal-img');
    var closeBtn = document.getElementById('image-modal-close');

    if (!container || !modal || !modalImg) return;

    container.addEventListener('click', function(e){
      var t = e.target;
      if (t && t.tagName === 'IMG' && t.dataset && t.dataset.fullSrc !== undefined) {
        modalImg.src = t.dataset.fullSrc || t.src;
        modal.style.display = 'flex';
      }
    });

    function closeModal(){ modal.style.display = 'none'; modalImg.src = ''; }

    closeBtn && closeBtn.addEventListener('click', closeModal);
    modal.addEventListener('click', function(e){
      if (e.target === modal) closeModal();
    });

    // close on ESC
    document.addEventListener('keydown', function(e){
      if (e.key === 'Escape') closeModal();
    });
  })();
</script>